{
  "comments": [
    {
      "key": {
        "uuid": "0da4fdb8_8b99d752",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2015-05-15T20:46:18Z",
      "side": 1,
      "message": "specify component",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eda6c9c2_03fea7aa",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1026058
      },
      "writtenOn": "2015-05-15T21:16:26Z",
      "side": 1,
      "message": "e.g. \"android: binder: Fix BR_ERROR ...\"?",
      "parentUuid": "0da4fdb8_8b99d752",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "eda6c9c2_83eb77a7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 7,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2015-05-15T21:27:18Z",
      "side": 1,
      "message": "yes that will work. Usually it is best to use the same prefix as other changes to the file, but this one has a lot of different formats used.",
      "parentUuid": "eda6c9c2_03fea7aa",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0da4fdb8_0ba5e77f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2015-05-15T20:46:18Z",
      "side": 1,
      "message": "Does libbinder already handle these new return values correctly, or does it also need to change?",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0da4fdb8_2b9b8bbd",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1026058
      },
      "writtenOn": "2015-05-15T21:16:26Z",
      "side": 1,
      "message": "IPCThreadState already assumes this with:\ncase BR_ERROR:\n        result \u003d mIn.readInt32()\n\nI\u0027m actually not sure what the practical result of this would be for the one case where BR_ERROR was already being used (in the case of a failed allocation of binder_ref_death struct when processing a BC_CLEAR_DEATH_NOTIFICATION), as an extra, unprovided 4 bytes would be read from the read buffer.",
      "parentUuid": "0da4fdb8_0ba5e77f",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0da4fdb8_96b81ad9",
        "filename": "/COMMIT_MSG",
        "patchSetId": 1
      },
      "lineNbr": 13,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2015-05-15T21:27:18Z",
      "side": 1,
      "message": "That would be fatal, but those allocations never fail on android.",
      "parentUuid": "0da4fdb8_2b9b8bbd",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd8d8546_ed26e8e4",
        "filename": "drivers/android/binder.c",
        "patchSetId": 1
      },
      "lineNbr": 2190,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2015-05-15T20:46:18Z",
      "side": 1,
      "message": "This should be checked before writing the first part of BR_ERROR.",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd8d8546_cd284c03",
        "filename": "drivers/android/binder.c",
        "patchSetId": 1
      },
      "lineNbr": 2190,
      "author": {
        "id": 1026058
      },
      "writtenOn": "2015-05-15T21:16:26Z",
      "side": 1,
      "message": "There is no change in behavior here.  The first check is done above in ptr \u003c end, although it could be argued that these checks should also make sure that ptr \u003c\u003d (end - sizeof(uint32_t))",
      "parentUuid": "cd8d8546_ed26e8e4",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "cd8d8546_087de22c",
        "filename": "drivers/android/binder.c",
        "patchSetId": 1
      },
      "lineNbr": 2190,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2015-05-15T21:27:18Z",
      "side": 1,
      "message": "There is a change in behavior since BR_ERROR will now be returned, where in practice it is never returned with the existing driver. Also, with the new code added below you may return BR_ERROR for the same error more than once, since it is only cleared after writing the param.",
      "parentUuid": "cd8d8546_cd284c03",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0da4fdb8_dc68036a",
        "filename": "drivers/android/binder.c",
        "patchSetId": 1
      },
      "lineNbr": 2190,
      "author": {
        "id": 1026058
      },
      "writtenOn": "2015-05-15T23:41:03Z",
      "side": 1,
      "message": "I guess what I mean is that adding an \"if (ptr \u003d\u003d end)\" before the first put_user() call is pointless since immediately before it we already ensure ptr \u003c end.  Should I be checking before copying the thread-\u003ereturn_error that \"ptr \u003c\u003d end - (sizeof(uint32_t) + sizeof(int32_t))\" in the case of BR_ERROR?  In that case, we\u0027d not record BR_ERROR unless there were enough room for the param as well.  I\u0027m assuming we used \"ptr \u003d\u003d end\" before due to alignment guarantees?",
      "parentUuid": "cd8d8546_087de22c",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0da4fdb8_dca003eb",
        "filename": "drivers/android/binder.c",
        "patchSetId": 1
      },
      "lineNbr": 2190,
      "author": {
        "id": 1000205
      },
      "writtenOn": "2015-05-16T00:01:12Z",
      "side": 1,
      "message": "My point is that you should not write a partial return value. The old code was only writing return values without parameters correctly, and the ptr \u003d\u003d end check was needed to not write both return_error2 and return_error to the buffer when there was only room for one of them. (There is an existing bug in this code that Riley has a fix for in \"\nandroid: binder: fix duplicate error return.\")",
      "parentUuid": "0da4fdb8_dc68036a",
      "revId": "4d32fe0e87736876ba84bcae6db71da6eb677223",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}