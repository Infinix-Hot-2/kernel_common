{
  "comments": [
    {
      "key": {
        "uuid": "4e67020f_f8d4c61c",
        "filename": "drivers/base/power/common.c",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1000414
      },
      "writtenOn": "2016-06-22T18:18:25Z",
      "side": 1,
      "message": "Same thing from Todd - is it needed?",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 1
      },
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e564e46_66acc0a1",
        "filename": "drivers/base/power/common.c",
        "patchSetId": 4
      },
      "lineNbr": 17,
      "author": {
        "id": 1010110
      },
      "writtenOn": "2016-06-22T18:26:12Z",
      "side": 1,
      "message": "It was needed in the upstream commit which added a device_pm_check_callbacks call to dev_pm_domain_set which doesn\u0027t exist here.\n\nI can remove it to simplify.",
      "parentUuid": "4e67020f_f8d4c61c",
      "range": {
        "startLine": 17,
        "startChar": 0,
        "endLine": 17,
        "endChar": 1
      },
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ed5a6ce_6baa3da2",
        "filename": "drivers/base/power/domain.c",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1069543
      },
      "writtenOn": "2016-06-22T18:12:44Z",
      "side": 1,
      "message": "is this needed?",
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8ed2dae5_f92a8823",
        "filename": "drivers/base/power/domain.c",
        "patchSetId": 4
      },
      "lineNbr": 23,
      "author": {
        "id": 1010110
      },
      "writtenOn": "2016-06-22T18:26:12Z",
      "side": 1,
      "message": "Seems like we could go without it, but its part of the upstream commit. I can drop it if preferred.",
      "parentUuid": "6ed5a6ce_6baa3da2",
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "6ed5a6ce_4bc09959",
        "filename": "drivers/base/power/main.c",
        "patchSetId": 4
      },
      "lineNbr": 1579,
      "author": {
        "id": 1069543
      },
      "writtenOn": "2016-06-22T18:12:44Z",
      "side": 1,
      "message": "Is this the only place where no_pm_callbacks is consumed? Any reason why the checks in device_pm_check_callbacks() can\u0027t be done here and eliminate this bitfield?",
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e564e46_0b5a2ddc",
        "filename": "drivers/base/power/main.c",
        "patchSetId": 4
      },
      "lineNbr": 1579,
      "author": {
        "id": 1010110
      },
      "writtenOn": "2016-06-22T18:26:12Z",
      "side": 1,
      "message": "So this sounds reasonable, but as this is a backport of an upstream commit, I\u0027d prefer to keep it close to upstream.\n\n+Ulf: Do you have any thoughts on this?",
      "parentUuid": "6ed5a6ce_4bc09959",
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "0ec6ea30_83b2ecfc",
        "filename": "drivers/base/power/main.c",
        "patchSetId": 4
      },
      "lineNbr": 1579,
      "author": {
        "id": 1069543
      },
      "writtenOn": "2016-06-22T18:30:11Z",
      "side": 1,
      "message": "Hmm. Looking closer, all of this is just to skip these conditionals below. In the empty case, we will just fall out the bottom of the if/else with callback\u003d\u003dNULL and end up and the unlock label.\n\nSo just avoiding the memory latency for these conditionals is what fixes the issue?",
      "parentUuid": "6ed5a6ce_4bc09959",
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2e680e70_c7fe3e72",
        "filename": "drivers/base/power/main.c",
        "patchSetId": 4
      },
      "lineNbr": 1579,
      "author": {
        "id": 1010110
      },
      "writtenOn": "2016-06-22T20:48:01Z",
      "side": 1,
      "message": "Sorry (I submitted a new version before noticing this comment). This is a bit confusing. Let me follow up with Ulf to make sure I better understand the core reason this fixes the problem and I\u0027ll resubmit.",
      "parentUuid": "0ec6ea30_83b2ecfc",
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8e09fadf_9a3e0dd0",
        "filename": "drivers/base/power/main.c",
        "patchSetId": 4
      },
      "lineNbr": 1579,
      "author": {
        "id": 1010110
      },
      "writtenOn": "2016-06-22T21:19:51Z",
      "side": 1,
      "message": "Ok.. So the subtle detail here is that ret \u003d 1, which sets direct_complete which wasn\u0027t done previously. This allows the problematic i2c driver to properly suspend w/o causing clk disable/enable mismatches.",
      "parentUuid": "0ec6ea30_83b2ecfc",
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2eed6e38_42c1343c",
        "filename": "drivers/base/power/main.c",
        "patchSetId": 4
      },
      "lineNbr": 1579,
      "author": {
        "id": 1069543
      },
      "writtenOn": "2016-06-22T21:45:43Z",
      "side": 1,
      "message": "Ok, then it still seems like we don\u0027t need dev-\u003epower.no_pm_callbacks or any of the calls to device_pm_check_callbacks except one right here. The code would then be:\n\n  if (!device_pm_check_callbacks()) {\n    ret \u003d 1;\n    goto unlock;\n  }\n\nand none of the changes in the other files are needed.\n\nHaving to sprinkle device_pm_check_callbacks() invocations throughout the code to get this set up correctly seems error prone, and if its side effects are only used here, then why not only call it here?",
      "parentUuid": "8e09fadf_9a3e0dd0",
      "revId": "e39767c9d2e0053849916ea9a0921e4ed9337b77",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}