{
  "comments": [
    {
      "key": {
        "uuid": "AAAA9n//988\u003d",
        "filename": "drivers/usb/gadget/f_acm.c",
        "patchSetId": 2
      },
      "lineNbr": 866,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T01:31:13Z",
      "side": 1,
      "message": "sizeof(*acm)",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//97c\u003d",
        "filename": "drivers/usb/gadget/f_acm.c",
        "patchSetId": 2
      },
      "lineNbr": 885,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T01:31:13Z",
      "side": 1,
      "message": "this seems very racy. The line discipline could be opened and closed between these, and will get into a funny state with the connected flag being all weird, etc. I think you may need to do something like gldisc_get(port_num, acm, acm_ldisc_connect, acm_ldisc_disconnect)",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//960\u003d",
        "filename": "drivers/usb/gadget/f_acm.c",
        "patchSetId": 2
      },
      "lineNbr": 885,
      "author": {
        "id": 1003977
      },
      "writtenOn": "2010-12-02T02:22:11Z",
      "side": 1,
      "message": "These callbacks are only called when we are connected and the connected flag is set when gadget call set_alt, so it can only happen after bind_config has returned",
      "parentUuid": "AAAA9n//97c\u003d",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//95o\u003d",
        "filename": "drivers/usb/gadget/f_acm.c",
        "patchSetId": 2
      },
      "lineNbr": 885,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T02:28:54Z",
      "side": 1,
      "message": "but the line discpline\u0027s open/close can be called in parallel to this. So, can\u0027t the ldisc code see a connect set but disconnect not set?",
      "parentUuid": "AAAA9n//960\u003d",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//95c\u003d",
        "filename": "drivers/usb/gadget/f_acm.c",
        "patchSetId": 2
      },
      "lineNbr": 885,
      "author": {
        "id": 1003977
      },
      "writtenOn": "2010-12-02T02:37:19Z",
      "side": 1,
      "message": "yes but it uses these callback only once we are connected",
      "parentUuid": "AAAA9n//95o\u003d",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//95I\u003d",
        "filename": "drivers/usb/gadget/f_acm.c",
        "patchSetId": 2
      },
      "lineNbr": 885,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T03:03:10Z",
      "side": 1,
      "message": "you are right, I see now.",
      "parentUuid": "AAAA9n//95c\u003d",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//97w\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 154,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T01:31:13Z",
      "side": 1,
      "message": "list_first_entry",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//970\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 172,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T01:31:13Z",
      "side": 1,
      "message": "list_first_entry",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//97o\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 263,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T01:31:13Z",
      "side": 1,
      "message": "why do you call disconnect if the ld is not opened. When would you have called connect?",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//96o\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 263,
      "author": {
        "id": 1003977
      },
      "writtenOn": "2010-12-02T02:22:11Z",
      "side": 1,
      "message": "This calls acm_connect that just notify to the host of the line state. The name is badly chosen in f_acm, they should have a set_line_state callback instead",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//97k\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 324,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T01:31:13Z",
      "side": 1,
      "message": "how do you prevent this -\u003econnect from being called twice? once in here and another time in gldisc_connect? Am I missing something?",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//96Y\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 324,
      "author": {
        "id": 1003977
      },
      "writtenOn": "2010-12-02T02:22:11Z",
      "side": 1,
      "message": "This can\u0027t be called twice, we won\u0027t call start_io twice. But I should do if(gld-\u003etty) in gldisc_connect instead of if(gld-\u003eopened) to avoid a possible race.",
      "parentUuid": "AAAA9n//97k\u003d",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//97g\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 340,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T01:31:13Z",
      "side": 1,
      "message": "if connected but !gld-\u003edisconnect, how would the connected flag get cleared? Do you require both connect and disconnect call backs?",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//96U\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 340,
      "author": {
        "id": 1003977
      },
      "writtenOn": "2010-12-02T02:22:11Z",
      "side": 1,
      "message": "this doesn\u0027t clear the connected flag, just notify of the line state",
      "parentUuid": "AAAA9n//97g\u003d",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//95s\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 340,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T02:28:54Z",
      "side": 1,
      "message": "well, the disconnect callback will end up calling gldisc_disconnect, which will clear the connected flag, no?",
      "parentUuid": "AAAA9n//96U\u003d",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//95g\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 340,
      "author": {
        "id": 1003977
      },
      "writtenOn": "2010-12-02T02:37:19Z",
      "side": 1,
      "message": "no this just changes the DSR / DCD flags in line_state",
      "parentUuid": "AAAA9n//95s\u003d",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//95Q\u003d",
        "filename": "drivers/usb/gadget/u_ldisc.c",
        "patchSetId": 2
      },
      "lineNbr": 340,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T03:03:10Z",
      "side": 1,
      "message": "doh, sorry. my bad, i\u0027m blind. The names are a bit confusing.",
      "parentUuid": "AAAA9n//95g\u003d",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAA9n//99U\u003d",
        "filename": "include/linux/tty.h",
        "patchSetId": 2
      },
      "lineNbr": 53,
      "author": {
        "id": 1000413
      },
      "writtenOn": "2010-12-02T01:31:13Z",
      "side": 1,
      "message": "I\u0027d call this N_USBACM",
      "revId": "f078faceb6fe3e778b3f859ca662cd50785869fc",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}